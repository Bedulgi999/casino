<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ° í¬ì¸íŠ¸ ì¹´ì§€ë…¸ ë°ëª¨</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      background: radial-gradient(circle at top, #2b2f77, #05030a);
      color: #fff;
    }
    .center-box {
      width: 400px;
      margin: 60px auto;
      background: rgba(0,0,0,0.5);
      padding: 25px;
      border-radius: 15px;
    }
    input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      margin-bottom: 12px;
    }
    button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: #ff6b6b;
      color: white;
      font-size: 15px;
      cursor: pointer;
      margin-bottom: 10px;
    }
    button.secondary { background:#444; }
    a { color:#ffdd55; cursor:pointer; }
    
    /* ìŠ¬ë¡¯ë¨¸ì‹  ìŠ¤íƒ€ì¼ ê¸°ì¡´ ìœ ì§€ */
    .card {
      background: rgba(0, 0, 0, 0.55);
      border-radius: 20px;
      padding: 24px 28px 30px;
      width: 420px;
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.65);
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      margin: 40px auto;
    }
    .balance-box {
      display: flex;
      justify-content: space-between;
      padding: 10px 14px;
      background: rgba(15, 15, 40, 0.9);
      border-radius: 13px;
      font-size: 14px;
      margin-bottom: 16px;
    }
    .reels { display:flex; justify-content:space-between; margin:15px 0; }
    .reel {
      flex:1; margin:0 4px; height:70px; border-radius:12px;
      background:#10132f; display:flex; align-items:center; justify-content:center;
      font-size:34px;
    }
    .msg { text-align:center; margin-top:10px; min-height:20px; }
  </style>
</head>
<body>

<!-- ------------------ ë¡œê·¸ì¸ í™”ë©´ ------------------ -->
<div id="loginBox" class="center-box" style="display:none;">
  <h2>ğŸ”‘ ë¡œê·¸ì¸</h2>
  <input id="loginID" placeholder="ì•„ì´ë”” ì…ë ¥">
  <input id="loginPW" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" type="password">
  <button onclick="login()">ë¡œê·¸ì¸</button>
  <button class="secondary" onclick="showRegister()">íšŒì›ê°€ì…</button>
</div>

<!-- ------------------ íšŒì›ê°€ì… í™”ë©´ ------------------ -->
<div id="registerBox" class="center-box" style="display:none;">
  <h2>ğŸ“ íšŒì›ê°€ì…</h2>
  <input id="regID" placeholder="ì•„ì´ë””">
  <input id="regPW" placeholder="ë¹„ë°€ë²ˆí˜¸" type="password">
  <button onclick="registerUser()">ê°€ì…í•˜ê¸°</button>
  <button class="secondary" onclick="showLogin()">ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<!-- ------------------ ê´€ë¦¬ì í™”ë©´ ------------------ -->
<div id="adminBox" class="center-box" style="display:none;">
  <h2>ğŸ‘‘ ê´€ë¦¬ì í˜ì´ì§€</h2>
  <div id="userList" style="font-size:14px;"></div>
  <br>
  <button class="secondary" onclick="showGame()">ìŠ¬ë¡¯ë¨¸ì‹ ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<!-- ------------------ ìŠ¬ë¡¯ë¨¸ì‹  í™”ë©´ ------------------ -->
<div id="gameBox" style="display:none;">
  <div class="card">
    <h1>ğŸ° í¬ì¸íŠ¸ ìŠ¬ë¡¯ ë°ëª¨</h1>

    <div class="balance-box">
      <span id="displayUser"></span>
      <span id="balance"></span>
    </div>

    <div class="reels">
      <div class="reel" id="r1">ğŸ’</div>
      <div class="reel" id="r2">ğŸ‹</div>
      <div class="reel" id="r3">â­</div>
    </div>

    <input id="bet" type="number" min="10" step="10" value="50" style="padding:10px;width:100%;border-radius:8px;">
    <button onclick="spin()">ìŠ¤í•€í•˜ê¸°</button>
    <button class="secondary" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
    <div class="msg" id="msg"></div>

    <div style="text-align:center;margin-top:10px;">
      <a onclick="showAdmin()" id="adminLink" style="display:none;">ğŸ‘‘ ê´€ë¦¬ì í˜ì´ì§€</a>
    </div>
  </div>
</div>


<script>
// ---------------------- ê¸°ë³¸ ê³„ì • ìƒì„± ----------------------
if (!localStorage.getItem("users")) {
  let defaultUsers = {
    "admin": { pw:"admin1234", balance:999999, admin:true }
  };
  localStorage.setItem("users", JSON.stringify(defaultUsers));
}

// í˜„ì¬ ë¡œê·¸ì¸ ì •ë³´
let currentUser = null;

// í™”ë©´ ìŠ¤ìœ„ì¹˜ í•¨ìˆ˜
function showLogin() {
  hideAll();
  document.getElementById("loginBox").style.display = "block";
}
function showRegister() {
  hideAll();
  document.getElementById("registerBox").style.display = "block";
}
function showGame() {
  hideAll();
  document.getElementById("gameBox").style.display = "block";
}
function showAdmin() {
  hideAll();
  loadAdminUsers();
  document.getElementById("adminBox").style.display = "block";
}
function hideAll() {
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("registerBox").style.display = "none";
  document.getElementById("gameBox").style.display = "none";
  document.getElementById("adminBox").style.display = "none";
}


// ---------------------- ë¡œê·¸ì¸ ê¸°ëŠ¥ ----------------------
function login() {
  let id = document.getElementById("loginID").value;
  let pw = document.getElementById("loginPW").value;

  let users = JSON.parse(localStorage.getItem("users"));

  if (users[id] && users[id].pw === pw) {
    currentUser = id;
    showGame();
    updateUI();
  } else {
    alert("âŒ ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤!");
  }
}


// ---------------------- íšŒì›ê°€ì… ê¸°ëŠ¥ ----------------------
function registerUser() {
  let id = document.getElementById("regID").value;
  let pw = document.getElementById("regPW").value;

  let users = JSON.parse(localStorage.getItem("users"));
  if (users[id]) return alert("âŒ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.");

  users[id] = { pw:pw, balance:1000, admin:false };
  localStorage.setItem("users", JSON.stringify(users));

  alert("âœ” íšŒì›ê°€ì… ì„±ê³µ!");
  showLogin();
}


// ---------------------- UI ì—…ë°ì´íŠ¸ ----------------------
function updateUI() {
  let users = JSON.parse(localStorage.getItem("users"));
  document.getElementById("displayUser").innerText = currentUser + " ë‹˜";
  document.getElementById("balance").innerText = users[currentUser].balance;

  // ê´€ë¦¬ì ë§í¬ í‘œì‹œ ì—¬ë¶€
  if (users[currentUser].admin === true) {
    document.getElementById("adminLink").style.display = "inline";
  } else {
    document.getElementById("adminLink").style.display = "none";
  }
}


// ---------------------- ê´€ë¦¬ì í™”ë©´ ----------------------
function loadAdminUsers() {
  let users = JSON.parse(localStorage.getItem("users"));
  let html = "";

  for (let u in users) {
    html += `<b>${u}</b> - ${users[u].balance}P - ${users[u].admin ? "ê´€ë¦¬ì" : "ì¼ë°˜"}<br>`;
  }

  document.getElementById("userList").innerHTML = html;
}


// ---------------------- ë¡œê·¸ì•„ì›ƒ ----------------------
function logout() {
  currentUser = null;
  showLogin();
}


// ---------------------- ìŠ¬ë¡¯ë¨¸ì‹  ê¸°ëŠ¥ ----------------------
const symbols = ["ğŸ’","ğŸ‹","â­","ğŸ€","ğŸ’","7ï¸âƒ£"];

function spin() {
  if (!currentUser) return;

  let users = JSON.parse(localStorage.getItem("users"));
  let u = users[currentUser];

  let bet = parseInt(document.getElementById("bet").value);
  if (bet > u.balance) {
    document.getElementById("msg").innerText = "í¬ì¸íŠ¸ ë¶€ì¡±!";
    return;
  }

  u.balance -= bet;

  let s1 = symbols[Math.floor(Math.random()*symbols.length)];
  let s2 = symbols[Math.floor(Math.random()*symbols.length)];
  let s3 = symbols[Math.floor(Math.random()*symbols.length)];

  document.getElementById("r1").innerText = s1;
  document.getElementById("r2").innerText = s2;
  document.getElementById("r3").innerText = s3;

  // ê²°ê³¼ íŒì •
  let reward = 0;
  if (s1 === s2 && s2 === s3) reward = bet * 10;
  else if (s1 === s2 || s2 === s3 || s1 === s3) reward = bet * 2;

  u.balance += reward;
  localStorage.setItem("users", JSON.stringify(users));

  document.getElementById("msg").innerText =
    reward > 0 ? `ğŸ‰ ë‹¹ì²¨! +${reward}` : "âŒ ê½!";
  document.getElementById("balance").innerText = u.balance;
}


// ------------------ ì²« í™”ë©´ í‘œì‹œ ------------------
showLogin();

</script>
</body>
</html>
